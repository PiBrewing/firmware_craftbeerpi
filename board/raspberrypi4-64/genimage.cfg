image boot.vfat {
    vfat {
        label = "boot"
        files = {
            "config.txt",
            "bcm2711-rpi-4-b.dtb",
            "rpi-firmware/cmdline.txt",
            "rpi-firmware/fixup4.dat",
            "rpi-firmware/start4.elf",
            "rpi-firmware/overlays",
            "Image"
        }
    }

    size = 32M
}

image sdcard.img {
    hdimage {
        align = 4M
        partition-table-type = hybrid
    }

    partition boot {
        offset = 4M
        partition-type = 0xC
        partition-type-uuid = "c12a7328-f81f-11d2-ba4b-00a0c93ec93b"
        bootable = "true"
        image = "boot.vfat"
    }

    partition root {
        partition-type = 0x83
        partition-type-uuid = "b921b045-1df0-41c3-af44-4c6f280d3fae"
        image = "rootfs.ext4"
    }
}